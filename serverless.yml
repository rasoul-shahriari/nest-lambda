service: nest-lambda-demo

plugins:
 - serverless-plugin-typescript
 - serverless-plugin-optimize
 - serverless-plugin-ifelse

provider:
 name: aws
 runtime: nodejs20.x
 region: eu-north-1
 logRetentionInDays:  14 # Optional: Set the retention period for the Log Group
 logs:
    httpApi: true
    logGroupName: {Ref: 'AWS::StackName'} 
 
functions:
  backend:
   handler: backend/src/lambda.handler
   events:
     - http:
         method: any
         path: /api/{any+}

custom:
  optimize:
    excludeDevDependencies: true
    minify: true
    removeFiles: true
  serverless-offline:
    httpPort: 5000
  ifelse:
    local:
      - plugin: serverless-offline
        if: ${opt:stage, 'local'} == 'local'